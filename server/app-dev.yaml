application: gigamunch-omninexus-dev
module: server
version: 2
runtime: go
api_version: go1

handlers:
- url: /favicon.ico
  static_files: favicon.ico
  upload: favicon.ico

- url: /robots.txt
  static_files: robots.txt
  upload: robots.txt

# Gigachef app

- url: /.*bower_components
  static_dir: gigachef/bower_components
  secure: always

- url: /gigachef/service-worker.js
  static_files: gigachef/service-worker.js
  upload: gigachef/service-worker.js
  secure: always

- url: /gigachef/js
  static_dir: gigachef/js
  secure: always

- url: /gigachef/src
  static_dir: gigachef/src
  secure: always

- url: /gigachef.*
  static_files: gigachef/index.html
  upload: gigachef/index.html
  http_headers:
    Link: '</gigachef/js/user.js>; rel=preload; as=script, </gigachef/src/my-app.html>; rel=preload; as=document'
  secure: always

# Website app
- url: /source
  static_dir: app/source
  secure: always

# NOTE: make sure to add the page to app-shell.html
- url: /(|home|becomechef|faq|terms|privacy|upgrade|about)$
  static_files: app/index.html
  upload: app/index.html
  http_headers:
    Link: '</source/app-shell.html>; rel=preload; as=document, </source/home-page.html>; rel=preload; as=document'
  secure: always

- url: /.*
  script: _go_app
  secure: always

env_variables:
  GIGAMUNCH_PRIVATE_DIR: '/Users/atish/Development/go/src/gitlab.com/atishpatel/Gigamunch-Backend/private'
