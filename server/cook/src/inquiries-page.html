<link rel="import"
      href="../bower_components/polymer/polymer.html">
<link rel="import"
      href="../bower_components/paper-spinner/paper-spinner.html">
<link rel="import"
      href="shared-styles.html">
<link rel="import"
      href="inquiry-list.html">

<dom-module id="inquiries-page">
  <template>
    <shared-styles>
      <style include="shared-styles">
         :host {
          display: block;
          padding: 0 24px;
          background-color: white;
          min-height: 85vh;
          max-width: var(--max-content-width);
          margin: auto;
        }
        
        #spinner {
          display: flex;
          margin: auto;
          padding: 50px;
        }

      </style>
    </shared-styles>
    <paper-spinner id="spinner"
                   hidden$="[[!showSpinner]]"
                   active="[[showSpinner]]">
    </paper-spinner>
    <inquiry-list id="inquiryList"
                  inquiries="[[inquiries]]">
    </inquiry-list>

  </template>

  <script>
    Polymer({
      is: 'inquiries-page',
      properties: {
        inquiries: {
          type: Array,
          notify: true,
          value: [],
        },
        service: {
          type: Object,
        },
        user: {
          type: Object,
          notify: true,
        },
        showSpinner: {
          type: Boolean,
          value: false,
        },
      },
      selected: function() {
        ga('send', 'event', 'page', 'inquiries');
        this.getInquiries();
      },
      ready: function() {},
      getInquiries: function() {
        this.showSpinner = true;
        this.service.getInquiries(0, 1000, function(inquiries, err) {
          this.showSpinner = false;
          if (err.code !== 0) {
            this.fire('error', err);
            return;
          }
          this.set('inquiries', inquiries);
        }.bind(this));
      },
    });

  </script>
</dom-module>
