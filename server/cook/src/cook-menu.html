<link rel="import"
      href="../bower_components/polymer/polymer.html">
<link rel="import"
      href="item-list.html">
<dom-module id="cook-menu">
  <template>
    <style>
       :host {
        display: block;
      }
      
      .menu-name {
        font-size: 18px;
        padding-bottom: 8px;
        border-bottom: 1px solid #e8e8e8;
      }

    </style>

    <span id="menuName"
          class="menu-name">[[name]]</span>
    <item-list items="[[menu.items]]"
               on-additem="editItem"
               on-edititem="editItem"
               menu-color="[[menu.color]]">
    </item-list>
  </template>
  <script>
    Polymer({
      is: 'cook-menu',
      properties: {
        menu: {
          type: Object,
          notify: true,
          reflectToAttribute: true,
          value: {
            id: '0',
            name: 'New Menu',
            color: '#4FC3F7',
          },
          observer: 'menuUpdated',
        },
        name: {
          type: String,
          notify: true,
        },
      },
      menuUpdated: function() {
        if (this.menu !== undefined) {
          this.$.menuName.style.color = this.menu.color;
          if (this.menu.name === '') {
            this.name = 'Unnamed';
          } else {
            this.name = this.menu.name;
          }
        }
      },
      editItem: function(e) {
        var item = e.detail.item;
        if (item === undefined || item === null) {
          item = {
            menu_id: this.menu.id,
          };
        }
        this.fire('editmenuitem', {
          'item': item
        });
      },
    });

  </script>
</dom-module>
