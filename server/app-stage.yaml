application: gigamunch-omninexus-dev
module: default
version: 1
runtime: go
api_version: go1

handlers:
- url: /favicon.ico
  static_files: common/favicon.ico
  upload: common/favicon.ico

- url: /robots.txt
  static_files: common/robots.txt
  upload: common/robots.txt

- url: /common
  static_dir: common

# Website app
- url: /
  static_files: app/index.html
  upload: app/index.html
  secure: always

- url: /styles
  static_dir: app/styles
  secure: always

- url: /js
  static_dir: app/js
  secure: always

# Gigachef app
- url: /gigachef/elements
  static_dir: chef/dist/elements
  secure: always

- url: /gigachef/bower_components
  static_dir: chef/dist/bower_components
  secure: always

- url: /gigachef/styles
  static_dir: chef/dist/styles
  secure: always

- url: /gigachef/js
  static_dir: chef/dist/js
  secure: always

- url: /gigachef.*
  static_files: chef/dist/index.html
  upload: chef/dist/index.html
  http_headers:
    Link: '</gigachef/js/app.js>; rel=preload; as=script, </gigachef/elements/elements.html>; rel=preload; as=document, </gigachef/styles/main.css>; rel=preload; as=style'
  secure: always

- url: /.*
  script: _go_app
  secure: always

env_variables:
  PROJECTID: 'gigamunch-omninexus-dev'

skip_files:
  - ^(.*/node_modules/.*)
  - ^(.*/node_modules/.*)
  - ^(.*/)?.*/test/.*$
  - ^(.*/)?.*/tests/.*$
  - ^(.*/)?.*\.DS_Store$
  - ^(.*/)?.*\.md$
  - ^(.*/)?.*\.yml$
  - ^(.*/)?.*\.gitignore$
  - ^(.*/)?.*/LICENSE$
  - ^(chef/app/.*)
